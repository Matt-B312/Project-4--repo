{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mlebreton/Desktop/memories_project/cilent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mlebreton/Desktop/memories_project/cilent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mlebreton/Desktop/memories_project/cilent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useRef}from'react';import{Typography,TextField,Button}from'@material-ui/core/';import{useDispatch}from'react-redux';import useStyles from'./styles';import{commentPost}from'../../actions/posts';var CommentSection=function CommentSection(_ref){var _user$result;var post=_ref.post;var classes=useStyles();var _useState=useState(post===null||post===void 0?void 0:post.comments),_useState2=_slicedToArray(_useState,2),comments=_useState2[0],setComments=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),comment=_useState4[0],setComment=_useState4[1];var user=JSON.parse(localStorage.getItem('profile'));var dispatch=useDispatch();var commentsRef=useRef();var handleComment=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var finalComment,newComments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:finalComment=\"\".concat(user.result.name,\": \").concat(comment);_context.next=3;return dispatch(commentPost(finalComment,post._id));case 3:newComments=_context.sent;setComments(newComments);setComment('');commentsRef.current.scrollIntoView({behavior:'smooth'});case 7:case\"end\":return _context.stop();}}},_callee);}));return function handleComment(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:classes.commentsOuterContainer},/*#__PURE__*/React.createElement(\"div\",{className:classes.commentsInnerContainer},/*#__PURE__*/React.createElement(Typography,{gutterBottom:true,variant:\"h6\"},\"Comments\"),comments===null||comments===void 0?void 0:comments.map(function(c,i){return/*#__PURE__*/React.createElement(Typography,{key:i,gutterBottom:true,variant:\"subtitle1\"},/*#__PURE__*/React.createElement(\"strong\",null,c.split(': ')[0],\":\"),c.split(':')[1]);}),/*#__PURE__*/React.createElement(\"div\",{ref:commentsRef})),(user===null||user===void 0?void 0:(_user$result=user.result)===null||_user$result===void 0?void 0:_user$result.name)&&/*#__PURE__*/React.createElement(\"div\",{style:{width:'70%'}},/*#__PURE__*/React.createElement(Typography,{gutterBottom:true,varient:\"h6\"},\"Write a comment\"),/*#__PURE__*/React.createElement(TextField,{fullWidth:true,minRows:4,variant:\"outlined\",label:\"Comment\",multiline:true,value:comment,onChange:function onChange(e){return setComment(e.target.value);}}),/*#__PURE__*/React.createElement(Button,{style:{marginTop:'10px'},fullWidth:true,disabled:!comment,color:\"primary\",variant:\"contained\",onClick:handleComment},\"Comment\"))));};export default CommentSection;","map":{"version":3,"sources":["/Users/mlebreton/Desktop/memories_project/cilent/src/components/PostDetails/CommentSection.jsx"],"names":["React","useState","useRef","Typography","TextField","Button","useDispatch","useStyles","commentPost","CommentSection","post","classes","comments","setComments","comment","setComment","user","JSON","parse","localStorage","getItem","dispatch","commentsRef","handleComment","finalComment","result","name","_id","newComments","current","scrollIntoView","behavior","commentsOuterContainer","commentsInnerContainer","map","c","i","split","width","e","target","value","marginTop"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from 'react';\nimport { Typography, TextField, Button } from '@material-ui/core/';\nimport { useDispatch } from 'react-redux';\nimport useStyles from './styles';\nimport { commentPost } from '../../actions/posts';\n\n\nconst CommentSection = ({ post }) => {\n    \n    const classes = useStyles();\n    const [comments, setComments] = useState(post?.comments);\n    const [comment, setComment] = useState('');\n    const user = JSON.parse(localStorage.getItem('profile'));\n    const dispatch = useDispatch();\n    const commentsRef = useRef();\n\n    const handleComment = async () => {\n        const finalComment = `${user.result.name}: ${comment}`;\n        const newComments = await dispatch(commentPost(finalComment, post._id));\n\n        setComments(newComments);\n        setComment('');\n\n        commentsRef.current.scrollIntoView({ behavior: 'smooth' });\n    };\n\n    return (\n        <div>\n            <div className={classes.commentsOuterContainer}>\n                <div className={classes.commentsInnerContainer}>\n                <Typography gutterBottom variant=\"h6\">Comments</Typography>\n                    {comments?.map((c, i) => (\n                <Typography key={i} gutterBottom variant=\"subtitle1\">\n                    <strong>{c.split(': ')[0]}:</strong>\n                    {c.split(':')[1]}\n                </Typography>\n                    ))}\n                    <div ref={commentsRef} />\n                </div>\n                {user?.result?.name && (\n                <div style={{ width: '70%'}}>\n                    <Typography gutterBottom varient='h6'>Write a comment</Typography>\n                    <TextField \n                        fullWidth\n                        minRows={4}\n                        variant='outlined'\n                        label='Comment'\n                        multiline\n                        value={comment}\n                        onChange={(e) => setComment(e.target.value)}\n                    />\n                    <Button style={{ marginTop: '10px' }} fullWidth disabled={!comment} color=\"primary\" variant=\"contained\" onClick={handleComment}>\n                        Comment\n                    </Button>\n                </div>\n                )}\n            </div>\n        </div>\n    );\n};\n\nexport default CommentSection;"]},"metadata":{},"sourceType":"module"}