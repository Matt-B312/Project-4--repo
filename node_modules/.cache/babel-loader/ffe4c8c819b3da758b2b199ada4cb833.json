{"ast":null,"code":"import _toConsumableArray from\"/Users/mlebreton/Desktop/memories_project/cilent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/mlebreton/Desktop/memories_project/cilent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Container,Grow,Grid,Paper,AppBar,TextField,Button}from\"@material-ui/core\";import Posts from'../Posts/Posts';import Form from'../Form/Form';import{useHistory,useLocation}from'react-router-dom';import ChipInput from'material-ui-chip-input';import{useDispatch}from\"react-redux\";import{getPostsBySearch}from'../../actions/posts';import Pagination from'../Pagination';import useStyles from'./styles';function useQuery(){return new URLSearchParams(useLocation().search);}var Home=function Home(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),currentId=_useState2[0],setCurrentId=_useState2[1];var dispatch=useDispatch();var query=useQuery();var history=useHistory();var page=query.get('page')||1;var searchQuery=query.get('searchQuery');var classes=useStyles();var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),search=_useState4[0],setSearch=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),tags=_useState6[0],setTags=_useState6[1];var searchPost=function searchPost(){if(search.trim()||tags){dispatch(getPostsBySearch({search:search,tags:tags.join(',')}));history.push(\"/posts/search?searchQuery=\".concat(search||'none',\"&tags=\").concat(tags.join(',')));}else{history.push('/');}};var handleKeyPress=function handleKeyPress(e){if(e.keyCode===13){searchPost();}};var handleAdd=function handleAdd(tag){return setTags([].concat(_toConsumableArray(tags),[tag]));};var handleDelete=function handleDelete(tagToDelete){return setTags(tags.filter(function(tag){return tag!==tagToDelete;}));};return/*#__PURE__*/React.createElement(Grow,{in:true},/*#__PURE__*/React.createElement(Container,{maxWidth:\"xl\"},/*#__PURE__*/React.createElement(Grid,{container:true,justifyContent:\"space-between\",alignItems:\"stretch\",spacing:3,className:classes.gridContainer},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6,md:9},/*#__PURE__*/React.createElement(Posts,{setCurrentId:setCurrentId})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6,md:3},/*#__PURE__*/React.createElement(AppBar,{className:classes.appBarSearch,position:\"static\",color:\"inherit\"},/*#__PURE__*/React.createElement(TextField,{onKeyPress:handleKeyPress,name:\"search\",variant:\"outlined\",label:\"Search Memories\",fullWidth:true,value:search,onChange:function onChange(e){return setSearch(e.target.value);}}),/*#__PURE__*/React.createElement(ChipInput,{style:{margin:'10px 0'},value:tags,onAdd:handleAdd,onDelete:handleDelete,label:\"Search Tags\",variant:\"outlined\"}),/*#__PURE__*/React.createElement(Button,{onClick:searchPost,className:classes.searchButton,variant:\"contained\",color:\"primary\"},\"Search\")),/*#__PURE__*/React.createElement(Form,{currentId:currentId,setCurrentId:setCurrentId}),!searchQuery&&!tags.length&&/*#__PURE__*/React.createElement(Paper,{elevation:6,className:classes.pagination},/*#__PURE__*/React.createElement(Pagination,{page:page}))))));};export default Home;","map":{"version":3,"sources":["/Users/mlebreton/Desktop/memories_project/cilent/src/components/Home/Home.js"],"names":["React","useState","Container","Grow","Grid","Paper","AppBar","TextField","Button","Posts","Form","useHistory","useLocation","ChipInput","useDispatch","getPostsBySearch","Pagination","useStyles","useQuery","URLSearchParams","search","Home","currentId","setCurrentId","dispatch","query","history","page","get","searchQuery","classes","setSearch","tags","setTags","searchPost","trim","join","push","handleKeyPress","e","keyCode","handleAdd","tag","handleDelete","tagToDelete","filter","gridContainer","appBarSearch","target","value","margin","searchButton","length","pagination"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Container, Grow, Grid, Paper, AppBar, TextField, Button } from \"@material-ui/core\";\nimport Posts from '../Posts/Posts';\nimport Form from '../Form/Form';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport ChipInput from 'material-ui-chip-input';\nimport { useDispatch } from \"react-redux\";\nimport { getPostsBySearch } from '../../actions/posts';\nimport Pagination from '../Pagination';\nimport useStyles from './styles';\n\n\nfunction useQuery() {\n    return new URLSearchParams(useLocation().search);\n}\n\nconst Home = () => {\n    const [currentId, setCurrentId] = useState(0);\n    const dispatch = useDispatch();\n    const query = useQuery();\n    const history = useHistory();\n    const page = query.get('page') || 1;\n    const searchQuery = query.get('searchQuery');\n    const classes = useStyles();\n    const [search, setSearch] = useState('');\n    const [tags, setTags] = useState([]);\n\n    \n    const searchPost = () => {\n        if (search.trim() || tags) {\n          dispatch(getPostsBySearch({ search, tags: tags.join(',') }));\n          history.push(`/posts/search?searchQuery=${search || 'none'}&tags=${tags.join(',')}`);\n        } else {\n          history.push('/');\n        }\n      };\n\n\n    const handleKeyPress = (e) => {\n        if(e.keyCode === 13) {\n            searchPost();\n        }\n    };\n\n    const handleAdd = (tag) => setTags([ ...tags, tag]);\n\n    const handleDelete = (tagToDelete) => setTags(tags.filter((tag) => tag !== tagToDelete));\n\n\n  return (\n    <Grow in>\n        <Container maxWidth='xl'>\n            <Grid container justifyContent=\"space-between\" alignItems=\"stretch\" spacing={3} className={classes.gridContainer}>\n                <Grid item xs={12} sm={6} md={9}>\n                    <Posts setCurrentId={setCurrentId}/>\n                </Grid>\n                    <Grid item xs={12} sm={6} md={3}>\n                    <AppBar className={classes.appBarSearch} position=\"static\" color=\"inherit\">\n                        <TextField \n                            onKeyPress={handleKeyPress} \n                            name=\"search\" \n                            variant=\"outlined\" \n                            label=\"Search Memories\" \n                            fullWidth \n                            value={search} \n                            onChange={(e) => setSearch(e.target.value)} \n                            />\n                        <ChipInput\n                            style={{ margin: '10px 0' }}\n                            value={tags}\n                            onAdd={handleAdd}\n                            onDelete={handleDelete}\n                            label=\"Search Tags\"\n                            variant=\"outlined\"\n                        />\n                        <Button onClick={searchPost} className={classes.searchButton} variant=\"contained\" color=\"primary\">Search</Button>\n                    </AppBar>\n                         <Form  currentId={currentId} setCurrentId={setCurrentId}/>\n                         {(!searchQuery && !tags.length) && (\n                             <Paper elevation={6} className={classes.pagination}>\n                                <Pagination page={page} />\n                            </Paper>\n                         )}\n                    \n                </Grid>\n            </Grid>\n        </Container>\n    </Grow>\n  );\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}